# Миграции
Тут собственно сложены миграции.  
Необратимых пока нет, но любой откат скорее всего будет с потерей информации.  
Т.е. если мы создали столбец и начали его заполнять, то откат удалит столбец и вернет схему к варианту когда его не было.  
Поэтому пока даже не представляю как можно использовать откат, но формально можно. Если данных новых не внесли, то даже легко   
дока, как их делать тру вей тут: https://github.com/yiisoft/yii2/blob/master/docs/guide-ru/db-migrations.md
## Как мигрировать
на последнюю редакцию  
yii.bat migrate
### Первая миграция
Если в какой-то инсталляции миграций еще не было, то при первом запуске будут подтянуты вообще все миграции которые есть. 
Поэтому в миграциях по хорошему нужны проверки перед применением изменений. 
## Как откатиться
например на 3 последних миграции взад  
yii.bat migrate/down 3
## Известные проблемы
На Mysql не работает транзакционный механизм для процедур изменения схемы таблиц  
Т.е. если мы в миграции создали столбец, потом индекс, а потом внешний ключ и получили ошибку в последней операции, 
то один фиг первые 2 операции отработают, хоть все и было затолкано в одну транзакцию. А мы останемся в идиотском положении, когда
миграция не засчитана, но ее нельзся сделать, т.к. столбец и индекс уже есть. Откат тоже не сделать, т.к. миграция не удалась.
Пишут что на постгресе все круто с этим.
https://stackoverflow.com/questions/35841079/yii2-migration-transaction-methods-safeup-and-safedown-not-working
